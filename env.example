# =============================================================================
# JKB Finance Insights - Environment Configuration
# =============================================================================
# Copy this file to .env and modify the values as needed
# cp env.example .env

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Server host and port
SERVER_HOST=127.0.0.1
SERVER_PORT=8000

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Database file path (SQLite)
DATABASE_URL=finance_insights.db

# Database connection settings for better concurrency
DATABASE_TIMEOUT=60                # Database connection timeout in seconds (default: 60)
DATABASE_MAX_RETRIES=3            # Maximum retry attempts for locked database (default: 3)
DATABASE_RETRY_DELAY=0.1          # Delay between retries in seconds (default: 0.1)
DATABASE_WAL_MODE=true            # Enable WAL mode for better concurrency (default: true)

# =============================================================================
# SCRAPER CONFIGURATION
# =============================================================================

# Scraper timeout in seconds
SCRAPER_TIMEOUT=30

# Maximum retry attempts for failed scrapes
SCRAPER_MAX_RETRIES=3

# Delay between retries in seconds
SCRAPER_RETRY_DELAY=1

# =============================================================================
# AI CONFIGURATION
# =============================================================================

# OpenAI API key (required for AI analysis)
OPENAI_API_KEY=your_openai_api_key_here

# OpenAI model to use for analysis
OPENAI_MODEL=gpt-4-vision-preview

# Legacy prompt IDs (for compatibility)
OPENAI_PROMPT_BRIEFSTRATEGY_ID=
OPENAI_PROMPT_BRIEFSTRATEGY_VERSION_ID=

# OpenAI API Configuration
OPENAI_TIMEOUT=30000                # API call timeout in milliseconds (default: 30 seconds)
OPENAI_RATE_LIMIT=10                # Maximum calls per minute (default: 10)

# =============================================================================
# TASK QUEUE CONFIGURATION
# =============================================================================

# Number of worker processes for task processing
TASK_WORKERS=3                  # New preferred name
TASK_WORKER_COUNT=3             # Legacy alias for TASK_WORKERS

# Maximum retry attempts for failed tasks
TASK_MAX_RETRIES=3

# Task timeout in milliseconds (default: 5 minutes)
TASK_PROCESSING_TIMEOUT=300000

# Pending task timeout in milliseconds (default: 1 hour)
# Tasks stuck in pending state longer than this will be cancelled
TASK_PENDING_TIMEOUT=3600000

# Days to keep completed/failed tasks before cleanup
TASK_CLEANUP_DAYS=7

# =============================================================================
# UVICORN SERVER CONFIGURATION
# =============================================================================

# Enable auto-reload for development (true/false)
UVICORN_RELOAD=true

# Directory to watch for changes (for auto-reload)
UVICORN_RELOAD_DIR=.

# Log level (debug, info, warning, error, critical)
UVICORN_LOG_LEVEL=info

# Enable access logging (true/false)
UVICORN_ACCESS_LOG=true

# =============================================================================
# FRONTEND REFRESH INTERVALS (in milliseconds)
# =============================================================================

# Unified refresh interval for all UI elements
# This controls how often ALL UI components update (status bar, task counters, age displays, etc.)
FRONTEND_UNIFIED_REFRESH_INTERVAL=1000

# Table data refresh interval (how often to fetch new insights)
# This is kept separate as it's more resource-intensive
FRONTEND_TABLE_REFRESH_INTERVAL=10000

# Legacy intervals (deprecated - use FRONTEND_UNIFIED_REFRESH_INTERVAL instead)
# FRONTEND_AGE_REFRESH_INTERVAL=1000
# FRONTEND_STATUS_REFRESH_INTERVAL=2000

# =============================================================================
# APPLICATION BEHAVIOR SETTINGS
# =============================================================================

# Page reload delay after operations (in milliseconds)
APP_RELOAD_DELAY=1000

# Maximum number of items to fetch by default
APP_MAX_ITEMS=25

# Symbol search debounce delay (in milliseconds)
APP_SEARCH_DEBOUNCE=300

# Enable automatic table refresh (true/false)
APP_AUTO_REFRESH=true

# =============================================================================
# TRADINGVIEW CHART CONFIGURATION
# =============================================================================

# Chart height in pixels
TRADINGVIEW_CHART_HEIGHT=400

# Chart update interval (1, 5, 15, 30, 60, 240, 1D, 1W, 1M)
TRADINGVIEW_CHART_INTERVAL=1

# Chart timezone
TRADINGVIEW_CHART_TIMEZONE=America/New_York

# =============================================================================
# DEBUG AND LOGGING
# =============================================================================

# Enable debug mode (true/false)
DEBUG_MODE=false

# Log level for application logs
LOG_LEVEL=info

# Enable debugger interface (true/false)
DEBUGGER_ENABLED=true

# =============================================================================
# SECURITY AND RATE LIMITING
# =============================================================================

# Maximum requests per minute per IP
RATE_LIMIT_REQUESTS_PER_MINUTE=100

# Enable CORS (true/false)
CORS_ENABLED=true

# Allowed CORS origins (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:8000,http://127.0.0.1:8000

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Enable development mode features (true/false)
DEV_MODE=true

# Enable hot reload for frontend assets (true/false)
FRONTEND_HOT_RELOAD=true

# Enable detailed error messages (true/false)
SHOW_DETAILED_ERRORS=true
